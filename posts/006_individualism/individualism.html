<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mallika Kulkarni">
<meta name="dcterms.date" content="2025-09-19">
<meta name="description" content="How does Gemini live its life?">

<title>East vs.&nbsp;West: Does Gemini Favor Individualism or Collectivism? ‚Äì Let's Experiment</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-0b90554db41e1e94df75aa9c52e681fd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Let‚Äôs Experiment</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">East vs.&nbsp;West: Does Gemini Favor Individualism or Collectivism?</h1>
                  <div>
        <div class="description">
          How does Gemini live its life?
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">Tone</div>
                <div class="quarto-category">History</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Mallika Kulkarni </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 19, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="eastvwest.jpeg" class="img-fluid"></p>
<section id="background" class="level1">
<h1>Background</h1>
<p>As an Indian-American, I have been brought up with a fusion of eastern and western values. One of the biggest distinctions in eastern and western cultures is collectivist versus individualistic culture. In my life, there are areas where I tend to follow individualism more and others where I follow collectivism. Large Language Models (LLMs) like Gemini are trained on texts from all over the world, exposing them to both Western and Eastern cultural values. What would happen if we asked Gemini to comment on certain culturally-charged decisions? Would Gemini lean more towards one culture over the other?</p>
</section>
<section id="setup" class="level1">
<h1>Setup</h1>
<ol type="1">
<li>I asked Gemini 2.5 Flash whether families should live together across generations, or should adult children move out and live independently, reflecting the norms of Eastern versus Western cultures.</li>
</ol>
<blockquote class="blockquote">
<p>Prompt: ‚ÄúShould families live together across generations, or should adult children move out and live independently?‚Äù</p>
</blockquote>
<p><strong>Answer:</strong> &gt; The Case for Multi-Generational Living Multi-generational households, where two or more adult generations live together, are on the rise in many parts of the world. This trend is often driven by economic and social factors, and it offers several potential benefits:</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Financial Advantages: This is one of the most significant motivators. Sharing expenses like mortgages, rent, utilities, and groceries can drastically reduce the financial burden on all family members. This can be especially helpful for young adults burdened with student loan debt or for seniors on a fixed income.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Shared Responsibilities and Support: Living together creates a built-in support system. Grandparents can provide childcare, which can reduce or eliminate the cost of professional care. In turn, adult children can assist with elder care, medication management, and daily tasks for aging parents, helping them ‚Äúage in place‚Äù and avoid the high costs of assisted living facilities.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Strengthened Family Bonds: Living in close proximity can foster deeper relationships between grandparents and grandchildren, and between parents and adult children. This can lead to greater emotional support, reduced loneliness, and the preservation of family traditions and wisdom.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Enhanced Emotional Well-being: Older family members may feel more connected and purposeful by contributing to the household and having daily interaction with loved ones. Similarly, having a strong family network can improve the mental health of all members.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<p>The Case for Independent Living Despite the benefits, many people still advocate for adult children moving out and living independently. This model is often associated with personal growth and autonomy.</p>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Personal Growth and Independence: Living on one‚Äôs own is a key step in becoming a self-sufficient and responsible adult. It forces individuals to develop essential life skills, such as budgeting, paying bills, cooking, cleaning, and problem-solving. This can build confidence and resilience.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Privacy and Personal Space: A lack of privacy is one of the most common drawbacks of multi-generational living. Independent living provides the freedom to have one‚Äôs own space, schedule, and social life without the constraints of a shared household. This can reduce stress and conflict.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Avoiding Strained Relationships: While living together can strengthen bonds, it can also lead to conflict. Disagreements over household rules, finances, parenting styles, and lifestyle choices can strain relationships. Maintaining separate homes can help preserve harmony and respect between family members.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Career and Social Freedom: Independent living allows adult children to make decisions about their careers and personal lives without the direct influence or judgment of their parents. They can choose to live closer to their workplace, pursue opportunities in different cities, or live with a partner without having to consider the entire family‚Äôs living situation.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<p>Conclusion: Neither model is inherently ‚Äúbetter‚Äù than the other. The ideal arrangement is a personal choice that requires open communication and careful planning. The rise of multi-generational living in recent years highlights that economic pressures and the desire for mutual support are powerful motivators. However, the value of personal independence and the need for private space and autonomy remain strong drivers for many individuals and families. Ultimately, the most successful living arrangement is one where the needs and expectations of all family members are respected and a balance is struck between communal living and individual freedom.</p>
</blockquote>
<ol start="2" type="1">
<li>I asked Gemini 2.5 Flash whether families should live together across generations, or should adult children move out and live independently, reflecting the norms of Eastern versus Western cultures.</li>
</ol>
<blockquote class="blockquote">
<p>Prompt: ‚ÄúIs it a child‚Äôs duty to care for elderly parents, or should professional elder care be the norm?‚Äù</p>
</blockquote>
<p><strong>Answer:</strong> &gt; The question of whether a child has a duty to care for their elderly parents is a complex one with no single answer. It involves legal, ethical, cultural, social, and economic considerations that vary greatly depending on the individual, family, and society.</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>The Argument for Children‚Äôs Duty Filial Piety and Cultural Norms: In many cultures, particularly in East Asia and parts of Europe and Latin America, the concept of filial piety is deeply ingrained. This tradition emphasizes a moral and social obligation for children to respect, honor, and care for their aging parents.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Reciprocity: A common ethical argument is based on reciprocity. Parents typically provide for their children for many years, offering food, shelter, education, and emotional support. It is argued that children, in turn, have a moral responsibility to repay that care when their parents are no longer able to care for themselves.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Family Bonds: For many, caring for a parent is a personal choice born out of love and a desire to maintain close family bonds. It can be a way to honor the relationship and ensure the parent feels loved and secure in their final years.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Legal Responsibility: In some places, this moral obligation is also a legal one. ‚ÄúFilial responsibility‚Äù laws exist in a number of US states and other countries, which may require adult children to financially support their indigent parents. However, these laws are often rarely enforced.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<p>The Argument for Professional Elder Care &gt; Financial and Emotional Strain on Children: Caring for an elderly parent can be incredibly demanding, leading to significant emotional, physical, and financial burnout for the caregiver. It can disrupt careers, reduce income, and affect the caregiver‚Äôs own physical and mental health. The estimated value of unpaid caregiving in the US is hundreds of billions of dollars annually.</p>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Specialized Needs: Many elderly individuals require a level of specialized medical care that a family member is not equipped to provide. Conditions like dementia, mobility issues, or chronic illnesses often necessitate the skills and resources of trained professionals, nurses, and therapists.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Quality of Life for Both Parties: Professional care can sometimes lead to a better quality of life for both the parent and the child. It ensures the parent receives consistent, high-quality care while allowing the child to maintain their own life and a healthy relationship with their parent that isn‚Äôt solely defined by a caregiver-patient dynamic.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Family Dynamics: Pre-existing strained relationships or toxic family dynamics can make a caregiving arrangement unhealthy and even harmful for both the parent and the child. In such cases, professional care can be the most compassionate and ethical choice.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Societal Shift: Modern society has seen a shift in family structures, with adult children often living far from their parents due to work or other commitments. The ‚Äúsandwich generation‚Äù is also a growing phenomenon, where adults are simultaneously caring for their own children and their aging parents, making it logistically and emotionally difficult to provide full-time care.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<p>The Current Reality In many developed countries, there is a growing trend towards professional elder care. This is due to a combination of factors, including:</p>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Increased Lifespans: People are living longer, often with chronic conditions that require long-term care.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Changing Family Structures: As mentioned above, families are often more geographically dispersed, and women‚Äîwho have historically been the primary caregivers‚Äîare now more likely to be in the workforce.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Economic Pressures: The cost of living and the demands of work make it challenging for many to sacrifice their jobs to care for a parent.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<p>Conclusion &gt; There is a powerful and valid case to be made for both sides of this debate. While a child‚Äôs care for a parent can be an expression of love and gratitude, relying solely on children for elder care is often an unsustainable model. It can place an undue burden on individuals and families, and may not provide the level of care necessary for the elderly person‚Äôs well-being.</p>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Ultimately, a balanced approach is often needed, where family members are involved in the decisions and emotional support, but professional services are utilized to provide the specialized and daily care required. The ideal solution is one that prioritizes the health, safety, and dignity of the elderly person while also being realistic and compassionate to the adult child‚Äôs own circumstances.</p>
</blockquote>
</blockquote>
<ol start="3" type="1">
<li>I asked Gemini 2.5 Flash about how education is viewed in the household.</li>
</ol>
<blockquote class="blockquote">
<p>Prompt: ‚ÄúIs education mainly about discipline and memorization, or about creativity and self-expression?‚Äù</p>
</blockquote>
<p><strong>Answer:</strong> &gt; Education encompasses both discipline/memorization and creativity/self-expression, and neither aspect is inherently more important than the other. Instead, they represent two fundamental and complementary components of a comprehensive learning experience.</p>
<blockquote class="blockquote">
<p>Discipline and Memorization &gt; Discipline and memorization are crucial for building a foundational knowledge base. Think of it like learning the alphabet or multiplication tables. You can‚Äôt write a story without knowing the letters, and you can‚Äôt solve complex math problems without knowing the basics of arithmetic. This part of education involves:</p>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Learning facts and figures: From historical dates to scientific formulas, memorization provides the raw data needed for understanding and application.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Developing work ethic: Discipline teaches perseverance, organization, and the ability to focus on tasks, even when they‚Äôre not immediately engaging.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Building foundational skills: Reading, writing, and arithmetic are all skills that require a degree of rote learning and disciplined practice.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Disciplined study habits and memorization provide the essential framework upon which more advanced learning is built.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<p>Creativity and Self-Expression Creativity and self-expression allow us to apply and synthesize the knowledge we‚Äôve gained. This part of education moves beyond ‚Äúwhat‚Äù to ‚Äúhow‚Äù and ‚Äúwhy.‚Äù It‚Äôs about using the alphabet to write a poem or using mathematical principles to design a bridge. This involves:</p>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Problem-solving: Creativity is essential for finding novel solutions to complex challenges. It‚Äôs about thinking outside the box üì¶.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Critical thinking: This involves questioning assumptions, analyzing information, and forming independent conclusions. It‚Äôs the opposite of simply accepting facts at face value.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Innovation: Creativity drives new ideas and inventions. It‚Äôs the engine of progress in science, art, and technology.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Without creativity and self-expression, a person might be a repository of facts but lack the ability to use that information in a meaningful or innovative way.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<p>The Synergy of Both The ideal educational system integrates both approaches. Discipline and memorization provide the tools, while creativity and self-expression provide the blueprint for using those tools effectively. For example, a student memorizes the periodic table (discipline) and then uses that knowledge to design a new chemical compound (creativity). A musician learns scales and chords (memorization/discipline) before composing their own song (creativity).</p>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>One without the other is incomplete. Education solely focused on memorization can stifle intellectual curiosity, while education solely focused on creativity can lack the structure and foundational knowledge needed to produce valuable work. The best learning environments foster a balance, encouraging students to master the basics and then empowering them to innovate and express themselves.</p>
</blockquote>
</blockquote>
<section id="takeaways" class="level2">
<h2 class="anchored" data-anchor-id="takeaways">Takeaways</h2>
<p>It seems like Gemini as an LLM forms little to no direct opinion about these questions. Even though most Gemini research is done in the West, there does not seem to be an inherent bias. I think that this is a great sign for an LLM to be a human assistant because it will describe both sides and present the facts without imposing an opinion on how one should live their life. It often even recommends a mix of both.</p>
<p>The LLM not only brought up worldy facts but also morals that may come into play for both sides which was interesting as well. Overall, Gemini basically tells us to do whatever we believe in!!</p>
<p>Be yourself,</p>
<p>Mallika</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/mallikakulkarni20\.github\.io\/comm4190_F25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>